import{r as e,j as t,n as r,Z as n,_ as s}from"./vendor-B0xa4QN_.js";import{u as i,c as o}from"./index-E_pDXqqf.js";import{c as a}from"./Cahya SSS Logo Final-01-01-BGaUv-0e.js";import{c}from"./Quadrata Logo WonB Sq@2x-Dc0TxGdp.js";const l=[{id:1,title:"SALTED_CARAMEL",duration:"3:26",bpm:"CHILL",cover:a,audioUrl:"/audio/SALTED_CARAMEL.wav",waveform:new Array(32).fill(10)},{id:2,title:"ARKSID",duration:"1:16",bpm:"ACTION",cover:c,audioUrl:"/audio/ARKSID.mp3",waveform:new Array(32).fill(10)}];function u(){const[a,c]=e.useState(null),[u,d]=e.useState(!1),[m,f]=e.useState(0),[p,x]=e.useState(0),[h,w]=e.useState(Array(32).fill(0)),[g,v]=e.useState(!1),b=e.useRef(null),y=e.useRef(null),j=e.useRef(null),A=e.useRef(null),N=e.useRef(null),S=e.useRef(null),[k,L]=e.useState(!0),M=i(),R=e.useRef(new Map);e.useRef(new Map);const E=e.useRef(0);e.useEffect(()=>()=>{b.current&&(b.current.pause(),b.current=null),y.current&&(y.current.close(),y.current=null),N.current&&cancelAnimationFrame(N.current)},[]),e.useEffect(()=>{b.current&&(u?(b.current.play(),C()):(b.current.pause(),I()))},[u]);const C=()=>{if(!b.current||!j.current)return;const e=j.current,t=e.frequencyBinCount,r=new Uint8Array(t),n=Math.floor(t/32),s=M.isLowPowerDevice?200:50,i=t=>{if(!k||M.isLowPowerDevice)return w(Array(32).fill(0)),void(N.current=requestAnimationFrame(i));if(t-E.current<s)return void(N.current=requestAnimationFrame(i));E.current=t,e.getByteFrequencyData(r);const o=[];for(let e=0;e<32;e++){const t=e*n,s=t+n;let i=0;for(let e=t;e<s;e++)i+=r[e];const a=i/n;o.push(a/255)}w(o),N.current=requestAnimationFrame(i)};N.current=requestAnimationFrame(i)},I=()=>{N.current&&(cancelAnimationFrame(N.current),N.current=null),w(Array(32).fill(0))},F=()=>{v(!0)},q=()=>{v(!1)};return e.useEffect(()=>{if(g)return window.addEventListener("mouseup",q),()=>window.removeEventListener("mouseup",q)},[g]),e.useEffect(()=>{const e=S.current||document.getElementById("audio");if(!e)return;const t=new IntersectionObserver(e=>{L(e.some(e=>e.isIntersecting))},{threshold:.1});return t.observe(e),()=>t.disconnect()},[]),t.jsxs("section",{ref:e=>S.current=e,id:"audio",className:"py-20 md:py-32 min-h-screen flex flex-col justify-center max-w-7xl mx-auto px-4 sm:px-6 md:px-12 bg-background",children:[t.jsx(r.div,{className:"flex items-end justify-between mb-12 md:mb-16 border-b-2 border-black/10 pb-4 sticky top-16 md:top-20 z-20 bg-background/90 backdrop-blur-sm py-4",initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:t.jsx("h2",{className:"text-3xl sm:text-4xl md:text-6xl font-display font-bold text-right w-full text-foreground",children:"MUSIC"})}),t.jsx("div",{className:"grid md:grid-cols-2 gap-6 md:gap-8",children:l.map((e,i)=>{const v=a===e.id,S=v&&u,k=v&&p>0?m/p:0;return t.jsx(r.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.2*i},className:o("tech-border p-4 sm:p-6 bg-white/60 backdrop-blur-sm transition-all duration-300 hover:bg-white hover:border-primary/50 shadow-sm",v?"border-primary shadow-lg":""),children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6",children:[t.jsxs("div",{className:"relative w-full sm:w-32 aspect-square sm:h-32 shrink-0 overflow-hidden tech-border group/art cursor-pointer shadow-inner",children:[t.jsx("img",{src:e.cover,alt:e.title,className:o("w-full h-full object-cover transition-transform duration-700 group-hover/art:scale-110 group-hover/art:grayscale-0",S?"grayscale-0":"grayscale")}),t.jsx("div",{className:"absolute inset-0 bg-white/10 mix-blend-overlay"}),t.jsx("button",{onClick:()=>(e=>{const t=l.find(t=>t.id===e);t&&(a===e?d(!u):(b.current&&(b.current.pause(),b.current.src="",b.current=null),N.current&&(cancelAnimationFrame(N.current),N.current=null),A.current&&(A.current.disconnect(),A.current=null),d(!1),f(0),x(0),w(Array(32).fill(0)),setTimeout(()=>{y.current||(y.current=new(window.AudioContext||window.webkitAudioContext));const r=y.current,n=r.createAnalyser();n.fftSize=512,j.current=n;const s=new Audio(t.audioUrl),i=r.createMediaElementSource(s);i.connect(n),n.connect(r.destination),A.current=i,s.addEventListener("timeupdate",()=>{f(s.currentTime)}),s.addEventListener("loadedmetadata",()=>{x(s.duration)}),s.addEventListener("ended",()=>{d(!1),f(0),I()}),b.current=s,c(e),d(!0),s.play()},50)))})(e.id),className:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 group-hover/art:opacity-100 transition-opacity backdrop-blur-[2px]",children:S?t.jsx(n,{className:"w-8 h-8 text-primary fill-current"}):t.jsx(s,{className:"w-8 h-8 text-white fill-white"})})]}),t.jsxs("div",{className:"flex-1 flex flex-col gap-3 min-w-0",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-start mb-1 gap-2",children:[t.jsx("h3",{className:"font-display text-xl sm:text-2xl font-bold group-hover:text-primary transition-colors line-clamp-1 text-foreground",children:e.title}),t.jsx("span",{className:"font-mono text-[10px] sm:text-xs text-muted-foreground border border-black/10 px-2 py-0.5 bg-black/5 shrink-0 font-bold",children:e.bpm})]}),t.jsx("p",{className:"text-primary font-mono text-[10px] sm:text-xs tracking-widest font-bold",children:"ORIGINAL MIX"})]}),t.jsxs("div",{ref:t=>{t?R.current.set(e.id,t):R.current.delete(e.id)},className:o("h-16 sm:h-20 flex items-center gap-[3px] relative",v?"cursor-pointer group/progress":"cursor-default"),onClick:t=>((e,t)=>{if(a!==e||!b.current)return;const r=R.current.get(e);if(!r)return;const n=r.getBoundingClientRect(),s=(t.clientX-n.left)/n.width*p;b.current.currentTime=s,f(s)})(e.id,t),onMouseMove:t=>((e,t)=>{if(!g||a!==e||!b.current)return;const r=R.current.get(e);if(!r)return;const n=r.getBoundingClientRect(),s=Math.max(0,Math.min(t.clientX-n.left,n.width))/n.width*p;b.current.currentTime=s,f(s)})(e.id,t),onMouseDown:v?F:void 0,children:[e.waveform.map((r,n)=>{const s=n/e.waveform.length,i=v&&s<=k,a=v&&S&&h[n]>0?Math.max(15,100*h[n]):r;return t.jsx("div",{className:"flex-1 h-full flex items-center pointer-events-none",children:t.jsx("div",{className:o("w-full rounded-full transition-[height,background-color] duration-100 pointer-events-none",i?"bg-primary shadow-sm":"bg-black/10"),style:{height:`${a}%`,willChange:S?"height":"auto"},children:i&&t.jsx("div",{className:"w-full h-full bg-gradient-to-t from-transparent via-white/20 to-white/40 rounded-full pointer-events-none"})})},n)}),v&&t.jsx("div",{className:"absolute inset-0 opacity-0 group-hover/progress:opacity-100 transition-opacity pointer-events-none"})]}),t.jsxs("div",{className:"flex justify-between items-center font-mono text-[10px] sm:text-xs text-muted-foreground font-bold",children:[t.jsx("span",{children:v?(L=m,`${Math.floor(L/60)}:${Math.floor(L%60).toString().padStart(2,"0")}`):"0:00"}),t.jsx("span",{children:e.duration})]})]})]})},e.id);var L})})]})}export{u as default};
